---
layout: post
title:  Fedora, CentOS
category: linux 
---

# Fedora

Fedora作为主要的Linux发行版之一，我虽然用的不多，但实际上这却是我最早接触的Linux发行版。后来换用Ubuntu，很大的原因是因为：这是Google为Android选择的开发平台。

最近因为工作需要重新捡起了Fedora。但公司所用的版本太过古老，还是2009年的Fedora 12。所以想了一下，开始试用最新的Fedora 22(2015.2)。这里是使用过程中的一些操作笔记。

## 安装

https://getfedora.org/

这是官方的下载地址。这里我用的是Workstation版本。

Fedora 22的默认桌面是GNOME 3.16，这一版的外观借鉴了Mac OS X的一些设计，让人眼前一亮。

## 安装软件

Fedora 22使用dnf替代yum。因此安装基本gcc开发环境，可用如下命令：

`dnf install gcc kernel-devel patch bison flex subversion`

如果下载速度较慢的话，可以在/etc/dnf/dnf.conf最后添加：

`fastestmirror=true`

保存后，执行

{% highlight bash %}
$ sudo dnf clean all
$ sudo dnf makecache
{% endhighlight %}

此外，和Ubuntu一样，Fedora也有自己的网站可以查询软件包信息：

https://admin.fedoraproject.org/pkgdb/

## 共享文件夹

我用的是VirtualBox的虚拟环境，因此除了在VirtualBox中，设置共享文件夹之外，还需对Fedora进行如下操作：

1.添加用户到vboxsf中。

`usermod -a -G vboxsf <your user name>`

2.重启。（这一步必不可少，否则上面的配置不会生效。）

这样就可以在Fedora中浏览共享文件夹了。

# CentOS

## 关于repo设置

最近在数台PC上部署软件，系统都是CentOS 6。结果发现其中有一台机器无法使用yum安装软件。

解决办法：

1.进入/etc/yum.repos.d中删除CentOS6-Base.repo之外的所有文件。

2.`yum clean all`

第1步很重要，从事后情况来看，故障是由于某些之前的repo现在已经无法连接所致导致的。

## start-stop-daemon

start-stop-daemon是Ubuntu中用的比较多的工具，但是CentOS中并没有。由于start-stop-daemon在ubuntu的dpkg包中，和apt关系比较近，因此直接下载源码，也不是个好办法。

https://packagecloud.io/willgarcia/start-stop-daemon/install

上面的网页提供了一种办法。但是由于网络不好，中间步骤的文件有时需要手动下载才行。

## 关于epel

1.安装epel源

`yum install epel-release`

2.修改/etc/yum.repos.d/epel.repo

将mirrorlist中的https修改为http。否则，会报如下错误：

`Error: Cannot retrieve metalink for repository: epel`

## DNF

`yum install dnf`

这个似乎需要Cent OS 7以上，Cent OS 6反正是不行的。

## 关于VNC

1.安装

`yum install tightvnc-server`

这里虽然包名叫做tightvnc-server，但实际上用的是tigervnc-server，因此以后者为包名来安装也是可以的。

2.初次启动，设置密码

`vncpasswd`

3.配置分辨率、端口

修改/etc/sysconfig/vncservers：

{% highlight bash %}
## Single User ##
VNCSERVERS="1:<user name>"
VNCSERVERARGS[1]="-geometry 1280x1024"
{% endhighlight %}

默认端口一般是5900~5904。这里的数组下标表明它使用的端口是5901。

4.启动服务

`/etc/init.d/vncserver start`

参考：

http://www.tecmint.com/install-tightvnc-remote-desktop/

Install TightVNC Server in RHEL/CentOS and Fedora to Access Remote Desktops

# 世说新语

## 2018.10（续）

https://baijiahao.baidu.com/s?id=1551878390918435

抗美援朝志愿军吃的炒面是啥做的？为何彭德怀如获至宝？

----

约翰.斯皮兰在战前是一名棒球手，二战参军入伍上了战场。塔拉瓦战役期间，大兵约翰被日本人包围在一片洼地中，鬼子可不傻，也不硬刚，居高临下往他的身边扔手榴弹，想把他直接炸死。在此危急时刻，约翰爆发了小宇宙，发挥出自己作为棒球手的特长，每当日本人将手榴弹扔过来，他立马像接棒球一样接住，然后回敬给日本人。那场战斗中他一共扔回手榴弹五次，第六次的时候手榴弹炸了，虽然没死，但也使他永远告别了运动场。

----

冷兵器狂人杰克.丘吉尔，杰克.丘吉尔是一名英军上尉，又被称为疯狂杰克，是一名战斗狂热者，但是和别人不一样的是，人家用枪炮，他执着于冷兵器。

别人的画风是背着枪扛着炮，他是骑着摩托，背着弓箭，一侧绑着几个箭筒，帅的一匹。敦克尔克大撤退时，杰克上尉背着长弓，手握苏格兰长剑，且战且退，英勇的形象深深映入战友们的心中。

1940到1941年间，他在挪威、法国战斗时，曾经用一把英格兰长弓射杀多名德军。这也是英国长弓的最后一个战场击杀记录。

1943到1944年间，杰克上尉转战南斯拉夫，这时他已经装备升级，得到了一柄双手大剑，并且学会苏格兰风笛，白天战场上，近可大剑斩敌，远则飞箭穿心，晚上吹着苏格兰风笛鼓励战友，堪称神一般的存在。

不要以为此君只是个莽夫，此君曾经拿着一把双手大剑俘虏了四十二个德国人，其中还包括一个迫击炮班，有多生猛可以想象。

----

二战中美军曾经和德军并肩作战过，就在1945年5月4日，就是希特勒朝自己嘴巴里开了一枪几天后。当时奥地利有一座古堡（不叫威廉古堡），叫伊特城堡（Itter Castle。这座城堡在德奥合并后几经转手最后成了达壕集中营的一个外部关押点，负责关押一波姓赵的法国人，啊呸，错了，法国前军政高官。以及还有一位法国著名网球冠军（Jean Borotra）

话说希特勒朝自己开了一枪之后，德军人心浮动，这座监狱的主管党卫军骷髅队军官维默Wimmer就自己跑了。留下一帮懵逼的看守和犯人。这帮犯人一合计，咱就算自己把自己解放了算了？然后看守德国兵们表示，好像也只能这样了。。。但是当时的情况是，虽说失去指挥，军心浮动，但是很多军队仍然没有投降（他们毕竟是德国兵。。。而且德国宣布投降其实也还有两天）他们周围是党卫军的阵地，这帮人是打算顽抗的。

于是守卫和犯人一合计，不如派个人去找人罩着他们好了（好主意）。于是据说是一个厨子骑车跑到附近小镇，见到了德国国防军少校甘戈尔（Gangl），好消息是甘戈尔一直不喜欢纳粹（而且他是奥地利人），已经投身奥地利的反纳粹组织并且向美军投降了。可是，毕竟让一帮德国国防军去“解放”纳粹战俘有点太别扭了。于是少校找了他的临时上司，美军李（Lee）上尉帮忙，李上尉找不到更多援助；于是亲率两辆谢尔曼打火机（大雾。。。）以及十名美军，加上甘戈尔少校以及十四名德国国防军，组成一支美德联军。。。前去接管战俘。路上他们轻易摆平了一队拦路的党卫军，与战俘们汇合了。但是鉴于周边有很多党卫军，他们决定坚守城堡待援。

于是这晚他们真的遇上了党卫军第17装甲掷弹兵师一部的进攻。战斗打得很激烈，美军和德军并肩作战，抵抗党卫军进攻，而且还出现了以下这一幕：战俘之一，法国前总理雷诺亲自举枪参战，在德军少校的指挥下朝党卫军还击。战斗中谢尔曼打火机很快被党卫军的88炮打成零件，而城堡守卫者弹尽粮绝。连德军少校甘戈尔也被党卫军打死。党卫军马上就杀进去了。

这时美军援军终于来了，据说是那位法国网球明星乔装打扮穿越敌阵给美军带路至此。最后法国人获得释放，美国中尉获得了杰出十字勋章，阵亡的德国少校（奥地利人）被奥地利人人当作国民英雄。那支党卫军在几天后投降。

可怜了这场战役的死者，就差这么几天了。

----

当我在32岁成为哈佛大学终身教授的时候，终于有时间学习如何运算了——是如坐针毡地和一群年龄仅仅是我的一半多点的大学小鬼们一起上课。他们中的一些人还在上我执教的进化生物学。我将自尊搁置一边，来学习微积分。当在追赶中学习时，成绩拿C都费劲。----By Edward Osborne Wilson

>Edward Osborne Wilson，1929年生，美国生物学家，以研究蚂蚁著称，被称为生物社会学之父。同时也是一名杰出的科普作家，两获Pulitzer Prize。

----

在珍珠港事件前，不幸的“亚利桑那”号刚刚灌满了燃油。在其受到袭击后，舰体遭到严重损毁并致其下沉，所以除去泄露和燃烧的燃油外，仍有1/3的燃油留在舰内。黑色的燃油就顺着船舱的缝隙，一点一滴地向外流淌，被人们形象的称之为“黑泪”。

76年过去了，如今“亚利桑那”号仍泪流不止，每天流出大约9升左右的“黑泪”。美帝也考虑过污染问题，只不过“黑泪”体量巨大，若是强行处理，稍有不慎，美丽的“珍珠港”就会变成“黑珍珠”。因此美帝也仅仅是想想，并未动手，任凭“黑泪”继续流着。

----

1940年3月，回民支队为了打破日军的“囚笼政策”，决定在康庄设伏，但是因地形原因难以成功伏击大股敌军，一时十分被动。

恰逢日军为了强化封锁，令当地村民在路两边挖护路沟，回民支队闻之大喜，暗地里告诉村民，把沟挖了一丈多深，两壁陡峭。监工的日军看到挖好的沟后十分高兴，表示工程质量非常出色。

等到回民支队对公路上的日军发动攻击时，日军纷纷离开公路跳入护路沟中，没想到沟深壁陡，下去容易，上来可就难了……回民支队遂冲到沟边，往沟里招呼了一顿子弹加手榴弹，干净利索地结束了战斗。

