---
layout: post
title:  OpenGL研究, 各种GUI框架分析, 各种虚拟机软件比较, Win10历险记
category: technology 
---

# 书籍

我手上其实有几本关于OpenGL的实体书，但是比较了一下之后，发现还是电子版的《OpenGL编程指南》（俗称OpenGL红宝书）写的更好一些。该书目前已经出到第8版，我看的是第7版中文版的电子版。该书的官网是[http://www.opengl-redbook.com](http://www.opengl-redbook.com)，可以从上面获得书中例子的源代码。

# 教程

书籍偏重理论，而教程偏重实践。这里推荐Nate Robins的教程，该教程在上面的书中也多次提及过。它的网址是：[http://user.xmission.com/~nate/opengl.html](http://user.xmission.com/~nate/opengl.html)。

该教程和上面的书籍一样，都是基于GLUT库的，因此代码的移植性相当好。

教程中示例程序的操作非常简单，基本没什么好说的。唯一需要注意的是，点击鼠标右键会弹出菜单。而且右边屏幕的菜单不可点击，否则程序会退出，但可以用菜单上标注的键盘快捷键选中。这些都是看源代码之后，才发现的。

# 环境准备

## Ubuntu

主要需要这几个包：

1. freeglut3-dev。最经典的跨平台OpenGL工具包。书籍和教程都用且只用了它。

2. libglew-dev。可以用来运行GLSL的相关例子。这个对于OpenGL新特性的支持要强于glut。

3. libglfw-dev。一个glut的替代品。glut适合做demo，而这个可以用来做产品。

4. libepoxy-dev。GTK项目选择的OpenGL库。

# OpenGL vs Direct X

这两者的争斗已经有近20年的历史了。我最初知道它们，还是在2003年，跟随同学W学习VC的时候。当时我的判断是由于Direct X集成了开发游戏所需的一系列工具，因此它在PC上将超越OpenGL。后来的情况也差不多是这样的。

不过坦率的说，我对Direct X的了解，仅限于DirectDraw和DirectSound，基本上只够开发一些2D应用。

去年底由于想实现一些特殊的Android特效，才接触到OpenGL。按照我的估计，今后随着移动应用越来越重要，OpenGL的应用前景要好于Direct X。而且这个要不了多久，估计也就是这两年的事情。特此备忘。

# 各种GUI框架分析

# 综合型GUI框架

如MFC、Qt、GTK、Minigui、WxWidget等。这些框架不仅提供窗口管理，而且还提供了丰富的控件，因此从分类学的角度又被称为widget toolkits。除此之外，部分框架还提供了一些非GUI的功能模块，方便用户开发APP。

由于提供了控件，因此控件的绘制和消息在控件之间的分发，就成为了实现的难点。

从流派来看，又可分为两类：

1.以WxWidget为代表的框架，使用native控件及窗口系统。

2.以GTK为代表的框架，采用自绘控件，并管理控件消息的方式。我之前在L公司时，公司产品用的就是这种方案，它的特点是APP在所有平台的外观都是一致的。

# 简易型GUI框架

如glut、SDL等。这类框架仅提供窗口系统的功能，不提供控件。

# 特效型

如cocos2d，clutter等。这类框架构建于前两者之上，提供动画之类的特效。一些诸如圆形按钮、浮动按钮之类的非传统UI特效，在这类框架上实现起来要远比传统框架简单。

# GUI框架的图形渲染

自绘型GUI框架需要自己来处理图形渲染。图形渲染主要包括位图贴图和矢量绘图两部分。

早期框架的图形渲染处理主要有以下几个步骤：

1.申请一块内存缓冲区，按照特定格式组成像素缓冲区。

2.对像素缓冲区进行图形渲染。

3.将像素缓冲区绘制到显示设备上。

其中前两步都是平台无关的操作，只有第3步和硬件实现有关。这也是众多框架能跨平台的奥秘所在。

上面这种方法将图形计算完全放到CPU上。而随着硬件的进步，越来越多的设备配备了专门的GPU。因此现代GUI框架的图形处理步骤变成了这样：

1.申请一块显存缓冲区，按照特定格式组成像素缓冲区。

2.对像素缓冲区进行图形渲染。

3.将像素缓冲区绘制到显示设备上。

而完成这些操作的接口就是OpenGL。

这也是SDL从v1.2升级到v2.0所做的最大的改变。

# 虚拟机

早期如Bochs之类的没用过，现在估计也没什么人用了吧。

现在主要是以下三个选择：

1.VMware。商业收费软件。有免费版本的VMware Player，但该版本不可创建虚拟机，只可使用别人已经建好的虚拟机。

2.VirtualBox。开源免费软件。

3.Qemu。Qemu的易用性不佳，作为使用的话，能不用就不用了。但其不仅开源，而且支持的架构也很多，有的时候往往是唯一之选。作为研究学习来说，这个是首选。

这里主要讨论前两者的选择。

VMware由于是收费软件之故，因此用户的软件升级是个大问题。（土豪除外，有钱的话，这个就不是事了。）而旧的软件，往往对新的Linux发行版的支持较差。很多情况下，VMware Tool因为这个原因总是无法完美运行。严重影响了软件的易用性。

反之，VirtualBox就没有这些问题。虽然比较同期的VMware来说，VirtualBox的性能略逊。但是一般来说，科技行业里领先半年就已经是巨大的优势了。我相信现在的VirtualBox，无论如何也不会弱于两年前的VMware。

因此与其守着过时的VMware 8.0，还不如换用VirtualBox，这就是我的选择。

# Win10历险记

我大概在2015年4、5月间，听说了Win10免费升级的消息。于是一直很期待7月29日的到来。果然到了29日当天下午的时候，公司电脑就收到了升级的通知。然而由于网速不给力，当天并未对公司电脑进行升级。倒是晚上在家里的电脑上，虽然耗时2小时，但却一路顺利的升级成功。

Win10给人的第一感觉，其实和Win8差不多，不过是加了个更像Win7的开始菜单而已。不过既来之则安之，一段时间用下来，总算还是要比Win7强不少的。

又过了几天，公司的电脑也升级成功。正得意间，忽然发现VirtualBox在Win10下工作不正常。查了VirtualBox官网方知，其目前尚不支持Win10 Host。于是不得不重新降级到Win7。看来尝鲜也是有得有失的。对于工作用的电脑，有的时候够用就好，没必要什么都求新的。

# 郜艳敏与解忧公主

2015.8

前段时间，河北被拐女教师郜艳敏的事迹引起了网友们的极大关注。郜老师虽遭际坎坷，但却在平凡的岗位上作出了了不起的贡献。

命运这种东西，并非人人都能选择，很多时候往往是无法选择或无从选择。但即便命运再坎坷，也总有一些人，能在坎坷的逆境中，做出不平凡的事迹，郜老师是一例，解忧公主也是一例。

解忧公主，严格来说并不是公主，而是郡主。她的祖父刘戊是汉初的诸侯国——楚国的诸侯王。有这样一位有权势的祖父，照理说，解忧公主也算是含着金钥匙长大的“王二代”了。但不幸的是，这个刘戊参与了汉初著名的“七国之乱”，并兵败自杀，其家属一下子成为了叛逆之后。

没有具体的资料描述解忧公主的早年，但从她21岁和亲，便可看出她是多么的不受待见。这个岁数在那个时代绝对算是超级剩女了。

这里插一句，汉宣帝早年的经历与此非常类似。同样是叛逆之后，甚至还坐过牢。长大了要结婚的时候，他的养父张贺，本来是打算向兄弟张安世求亲的，结果张安世瞧不起汉宣帝，于是才便宜了平民许平君。不过，汉宣帝气度非凡，张安世后来在麒麟阁十一功臣中，排名第二，仅次于霍光。

解忧公主在西域的经历，早已大书特书，这里就不提了。这里只提解忧公主晚年回到长安时的情况。那时已是汉宣帝在位时期。从辈分来说，解忧公主算是汉宣帝的奶奶辈的人，于是汉宣帝亲自出城迎接。经过半个世纪的岁月，昔日的叛逆之后，已经成为了国家的大功臣，再也没有人会不待见她了。

汉宣帝以极大的礼遇厚待解忧公主。有的资料说是公主之礼，我看是不确切的，严格来说应该是长公主之礼——解忧公主上朝时，天子下阶相迎，这可不是公主能享受的礼遇，太后还差不多。

郜老师的事迹，从某种程度上，就是解忧公主的翻版，一个被拐女，能够成为感动大家的人物，而不仅是个被人同情可怜的人物，其中的辛酸实难尽述。这里还是衷心的祝福她今后的生活能够幸福吧。

# 卢作孚

2015.8

最早接触卢先生的事迹，是今年早些时候观看的一部记录“宜昌大撤退”的抗战纪录片。卢先生最初给我的印象，大约也就是那个时代的一个有本事的资本家而已。或者换个说法，也就是那个时代的马云、马化腾之类的牛逼人物。

但是随着对卢先生事迹的进一步了解，才发现如果说马云是外星人，那卢先生绝对是开挂的穿越者了——当时在微博上有个帖子，列举了达芬奇的种种牛逼，然后说他是穿越者。于是有网友感慨，怎么中国就没有穿越者。这时，就有人回应，谁说中国没有穿越者，卢作孚就是穿越者。

下面就将卢先生的开挂之处，列举一下：

1）数学。卢先生，又名卢思。小学文化，靠自学成为数学高手，著有《卢思数学全解》、《中等代数》、《三角》、《几何学等最新讲义》等书，被时人誉为乡下出来的“数学博士”。

2）资本家？没错这里是个很大的问号。按照一般的理解，被誉为“船王”的卢先生，应该是个富可敌国的大富豪了。但真相是让人大跌眼镜的，卢先生由始至终都只是民生公司的小股东，甚至最初的时候，一点股份都没有。他那点股份还是刘湘实在看不过去，硬塞给他的。

那么问题来了，作为一个小股东，甚至是没有股份的人，卢先生是如何如臂使指一般掌控民生公司的呢？具体的方法这里就不讲了，只讲一点。曾看到有本书讲领导和领袖的区别：领导是上级任命的，人们对领导的服从基于的是制度。一但领导下课，也就没有人会听他的了。而领袖不是任命出来的，人们对领袖的服从是发自内心的。领袖在台上是领袖，即使下台，也仍然会有人愿意追随。卢先生大概就属于领袖一级的人物。

3）志向。马云之流只是个成功的商人，本身并无大志。或者说做个有钱的商人，就是他们创业之初的终极目标。但卢先生不是这样，他创办实业的目标是实业救国，一如他在此之前的教育救国一样，这从他将公司命名为民生公司，就可以很明显的感觉到。

除了民生公司之外，卢先生还创办了北碚实验区。他在这里兴学，置业，改造社会，将自己“天下大同”的思想，付诸于实践。卢先生曾说过：“学校不是培育学生，而是教学生如何去培育社会。”可见一己荣辱根本不在卢先生的眼中，他思考的是如何担负起天下的兴亡。

柳传志曾说过：我可以谈谈我特别尊敬的人，比如民国时期的卢作孚，但我绝不敢跟他比。抗日时期，他让员工为国家运送物资，损失很大。之后他又一心做建设，后来蒙受不白之冤。我做事情之前会盘算半天，看对企业有利没利，之后我会尽力为社会做最大的贡献。而卢作孚完全是无私的。如果我处在战争年代会不会那样做，我不知道，但我很敬佩这样的人。

4）管理。民生公司以十余年时间，从一艘小船，发展到业务遍及日本、印度、东南亚的航运集团，又在抗战的烽火中，实现了宜昌大撤退的伟大奇迹。这和卢先生的管理理念是密切相关。

卢先生的管理思想以“人”为核心，以“服务社会，便利人群，开发产业，富强国家”的民生精神为纲，以“爱人”、“育人”、“选人”、“用人”“留人”为目，在企业管理的各个领域均有超卓之处。这一点即使在现在，也很少有公司能做到哪怕一部分，BAT都差得远。

“远学孔子，近学卢作孚”这虽是某书的广告词，但实不为过也。

